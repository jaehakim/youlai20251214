server:
  port: 8989

spring:
  datasource:
    type: com.alibaba.druid.pool.DruidDataSource
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://www.youlai.tech:3306/youlai_boot?zeroDateTimeBehavior=convertToNull&useUnicode=true&characterEncoding=UTF-8&serverTimezone=Asia/Shanghai&autoReconnect=true&allowMultiQueries=true
    username: youlai
    password: 123456
  data:
    redis:
      database: 11
      host: www.youlai.tech
      port: 6379
      password: 123456
      timeout: 10s
      lettuce:
        pool:
          # 연결 풀 최대 연결 수 기본값 8, 음수는 제한 없음을 의미
          max-active: 8
          # 연결 풀 최대 차단 대기 시간(음수는 제한 없음을 의미) 기본값 -1
          max-wait: -1
          # 연결 풀의 최대 유휴 연결 수 기본값 8
          max-idle: 8
          # 연결 풀의 최소 유휴 연결 수 기본값 0
          min-idle: 0
  cache:
    enabled: false
    # 캐시 타입 redis, none(캐시 사용 안 함)
    type: redis
    # 캐시 시간(단위: ms)
    redis:
      time-to-live: 3600000
      # null 값 캐싱, 캐시 관통 방지
      cache-null-values: true
    caffeine:
      spec: initialCapacity=50,maximumSize=1000,expireAfterWrite=600s
  # 이메일 설정
  mail:
    host: smtp.youlai.tech
    port: 587
    username: your-email@example.com
    password: 123456
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true
    # 이메일 발신자
    from: youlaitech@163.com
    #  Spring AI 설정
    ai:
      openai:
        # API Key
        api-key: ${DASHSCOPE_API_KEY:sk-c2941d05bf2f411ca80424fxxxxxxxx}

        # Base URL
        base-url: https://dashscope.aliyuncs.com/compatible-mode

        # Chat 模型配置
        chat:
          enabled: true
          options:
            # 모델명(qwen-plus, qwen-turbo, qwen-max, qwen-long)
            model: qwen-plus

            # Temperature(0.0-1.0, 값이 높을수록 답변이 더 무작위적임)
            temperature: 0.7

            # JSON 출력 형식(모델이 유효한 JSON을 반환하도록 보장)
            response-format:
              type: json_object

mybatis-plus:
  mapper-locations: classpath*:/mapper/**/*.xml
  global-config:
    db-config:
      # 기본키 ID 타입
      id-type: none
      # 논리 삭제에 해당하는 전역 속성명(주의: 객체 속성명이어야 하며 테이블 필드명이 아님, 예: isDeleted이며 is_deleted가 아님, 그렇지 않으면 논리 삭제가 실패함)
      logic-delete-field: isDeleted
      # 논리 삭제 - 삭제 값
      logic-delete-value: 1
      # 논리 삭제 - 미삭제 값
      logic-not-delete-value: 0
  configuration:
    # 카멜케이스-언더스코어 변환
    map-underscore-to-camel-case: true
    # 이 설정은 실행된 SQL을 출력하며, 개발 또는 테스트 시 사용 가능
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl

# 보안 설정
security:
  session:
    type: jwt # 세션 방식 [jwt|redis-token]
    access-token-time-to-live: 7200   # 액세스 토큰 유효기간(단위: 초), 기본값 2시간, -1은 영구 유효를 의미
    refresh-token-time-to-live: 604800   # 리프레시 토큰 유효기간(단위: 초), 기본값 7일, -1은 영구 유효를 의미
    jwt:
      secret-key: SecretKey012345678901234567890123456789012345678901234567890123456789 # JWT 비밀키(HS256 알고리즘은 최소 32자)
    redis-token:
      allow-multi-login: true # 다중 기기 로그인 허용 여부
  # 보안 화이트리스트 경로, AuthorizationFilter 필터만 건너뛰며, Spring Security의 다른 필터(CSRF, CORS 등)는 여전히 통과
  ignore-urls:
    - /api/v1/auth/login/**       # 로그인 인터페이스(계정 비밀번호 로그인, 휴대폰 인증 코드 로그인 및 위챗 로그인)
    - /api/v1/auth/captcha        # 인증 코드 획득 인터페이스
    - /api/v1/auth/refresh-token  # 리프레시 토큰 인터페이스
    - //api/v1/auth/wx/miniapp/code-login # 위챗 미니프로그램 code 로그인
    - /ws/**                      # WebSocket 인터페이스
  # 비보안 엔드포인트 경로, Spring Security의 필터를 완전히 우회
  unsecured-urls:
    - ${springdoc.swagger-ui.path}
    - /doc.html
    - /swagger-ui/**
    - /v3/api-docs/**
    - /webjars/**
    - /favicon.ico

# 파일 저장 설정
oss:
  # OSS 타입 (현재 aliyun, minio 지원)
  type: minio
  # MinIO 객체 저장 서비스
  minio:
    # 서비스 엔드포인트
    endpoint: http://localhost:9000
    # 액세스 자격 증명
    access-key: minioadmin
    # 자격 증명 비밀키
    secret-key: minioadmin
    # 버킷명
    bucket-name: public
    # (선택사항) 사용자 정의 도메인, 도메인을 설정하면 생성된 파일 URL은 도메인 형식이고, 설정하지 않으면 URL은 IP 형식 (예: https://oss.youlai.tech)
    custom-domain:
  # 알리바바 클라우드 OSS 객체 저장 서비스
  aliyun:
    # 서비스 엔드포인트
    endpoint: oss-cn-hangzhou.aliyuncs.com
    # 액세스 자격 증명
    access-key-id: your-access-key-id
    # 자격 증명 비밀키
    access-key-secret: your-access-key-secret
    # 버킷명
    bucket-name: default
  # 로컬 저장
  local:
    # 파일 저장 경로 주의사항: mac 사용자는 /Users/your-username/your-path/를 사용하세요. 그렇지 않으면 권한 문제가 발생할 수 있습니다. windows 사용자는 D:/your-path/를 사용하세요
    storage-path: /Users/theo/home/
# SMS 설정
sms:
  # 알리바바 클라우드 SMS
  aliyun:
    accessKeyId: LTAI5tSMgfxxxxxxdiBJLyR
    accessKeySecret: SoOWRqpjtS7xxxxxxZ2PZiMTJOVC
    domain: dysmsapi.aliyuncs.com
    regionId: cn-shanghai
    signName: 유라이 기술
    templates:
      #  등록 SMS 인증 코드 템플릿
      register: SMS_22xxx771
      # 로그인 SMS 인증 코드 템플릿
      login: SMS_22xxx772
      # 휴대폰 번호 변경 SMS 인증 코드 템플릿
      change-mobile: SMS_22xxx773

# springdoc 설정: https://springdoc.org/properties.html
springdoc:
  swagger-ui:
    path: /swagger-ui.html
    operationsSorter: alpha
    tags-sorter: alpha
  api-docs:
    path: /v3/api-docs
  group-configs:
    - group: '시스템 관리'
      paths-to-match: "/**"
      packages-to-scan:
        - com.youlai.boot.auth.controller
        - com.youlai.boot.system.controller
        - com.youlai.boot.platform.file.controller
        - com.youlai.boot.platform.codegen.controller
  default-flat-param-object: true

# knife4j 인터페이스 문서 설정
knife4j:
  # Knife4j 향상 기능 활성화 여부
  enable: true  # true로 설정하면 향상 기능 활성화
  # 프로덕션 환경 설정
  production: false  # true로 설정하면 프로덕션 환경에서 문서를 표시하지 않음, false는 문서 표시(일반적으로 개발 환경에서 사용)
  setting:
    language: zh_cn

# xxl-job 정기 작업 설정
xxl:
  job:
    # 정기 작업 스위치
    enabled: false
    admin:
      # 여러 주소는 쉼표로 구분
      addresses: http://127.0.0.1:8686/xxl-job-admin
    accessToken: default_token
    executor:
      appname: xxl-job-executor-${spring.application.name}
      address:
      ip:
      port: 9999
      logpath: /data/applogs/xxl-job/jobhandler
      logretentiondays: 30

# 인증 코드 설정
captcha:
  # 인증 코드 타입 circle-원형 간섭 인증 코드|gif-Gif 인증 코드|line-간섭선 인증 코드|shear-왜곡 간섭 인증 코드
  type: circle
  # 인증 코드 너비
  width: 120
  # 인증 코드 높이
  height: 40
  # 인증 코드 간섭 요소 개수
  interfere-count: 2
  # 텍스트 투명도(0.0-1.0)
  text-alpha: 0.8
  # 인증 코드 문자 설정
  code:
    # 인증 코드 문자 타입 math-산술|random-무작위 문자
    type: math
    # 인증 코드 문자 길이, type=산술일 때 연산 자릿수를 나타냄(1:일의 자리 연산 2:십의 자리 연산); type=무작위 문자일 때 문자 개수를 나타냄
    length: 1
  # 인증 코드 폰트
  font:
    # 폰트명 Dialog|DialogInput|Monospaced|Serif|SansSerif
    name: SansSerif
    # 폰트 스타일 0-일반|1-굵게|2-기울임
    weight: 1
    # 폰트 크기
    size: 24
  # 인증 코드 유효 기간(초)
  expire-seconds: 120

# 위챗 미니프로그램 설정
wx:
  miniapp:
    app-id: xxxxxx
    app-secret: xxxxxx


# ==================== AI 명령 시스템 설정 ====================
ai:
  # AI 기능 활성화 여부
  enabled: false

  # 현재 사용 중인 공급자: qwen, deepseek, openai
  provider: qwen

  # 모든 공급자 설정(통합 관리, 확장성 우수)
  providers:
    # 알리바바 통이치엔원(권장: 무료 할당량 있음)
    qwen:
      # API Key(https://bailian.console.aliyun.com/ 에서 획득)
      api-key: ${QWEN_API_KEY:sk-c2941d05bf2f411ca80424fcd1eb4e07}

      # Base URL(OpenAI 호환 엔드포인트)
      base-url: https://dashscope.aliyuncs.com/compatible-mode/v1

      # 모델: qwen-plus(권장), qwen-turbo, qwen-max, qwen-long
      model: qwen-plus

      # 표시명
      display-name: 알리바바 통이치엔원

      # 타임아웃(초)
      timeout: 30

    # DeepSeek
    deepseek:
      api-key: ${DEEPSEEK_API_KEY:}
      base-url: https://api.deepseek.com/v1
      model: deepseek-chat
      display-name: DeepSeek
      timeout: 30

    # OpenAI(새 공급자 추가 시 설정만 하면 됨, 코드 수정 불필요)
    openai:
      api-key: ${OPENAI_API_KEY:}
      base-url: https://api.openai.com/v1
      model: gpt-4
      display-name: OpenAI GPT-4
      timeout: 60

  # 보안 설정
  security:
    enable-audit: true
    dangerous-operations-confirm: true
    function-whitelist:
      - getUserInfo
      - updateUser
      - queryUsers
      - assignRole
    sensitive-params:
      - password
      - idCard
      - bankCard
      - token

  # 속도 제한 설정
  rate-limit:
    max-executions-per-minute: 10
    max-executions-per-day: 100
